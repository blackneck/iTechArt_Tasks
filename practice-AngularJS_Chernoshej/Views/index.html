<!DOCTYPE html>
<html>
	<head>
		<link href="../assets/css/styles.css" rel="stylesheet" type="text/css">
		<link href="../assets/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		<link href="../assets/css/blocker-styles.css" rel="stylesheet" type="text/css" />
	</head>
	<body ng-app="appModule">
		<div class="wrapper">
			<section ng-controller="stockController">
				<form ng-submit="addProduct()">
					<input ng-model="newProductFamily" placeholder="family" type="text">
					<input ng-model="newProductKind" placeholder="kind" type="text">
					<input ng-model="newProductMinAmount" placeholder="minimal amount" type="number" min="0">
					<span class="button add" ng-click="addProduct()">&#xf067;</span>
				</form>
				<table>
					<caption>
						<h2>Products</h2>
					</caption>
					<tr ng-repeat="product in products">
						<td>
							<table>
								<caption ng-bind="product.family"></caption>
								<tr>
									<th>name</th>
									<th>amount</th>
									<th>refill</th>
									<th>remove</th>
								</tr>
								<tr ng-repeat="kind in product.kinds">
									<td ng-bind="kind.name"></td>
									<td ng-bind="kind.amount"></td>
									<td>
										<span class="button dollar" ng-click="refill(product.family, kind.name)">&#xf155;</span>
									</td>
									<td>
										<span class="button remove" ng-click="removeProduct(product.family, kind.name)">&#xf00d;</span>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</section>
			<section ng-controller="vendorsController">
				<form>
					<input ng-model="newVendorName" placeholder="Name" type="text">
					<input ng-model="newVendorQuickness" placeholder="Quickness" type="number" min="1">
					<input ng-model="newVendorProduct" placeholder="Product" type="text">
					<input ng-model="newVendorProductPrice" placeholder="Product price" type="number" min="0">
					<span class="button add" ng-click="addVendor()">&#xf067;</span>
				</form>
				<table>
					<caption>
						<h2>Vendors</h2>
					</caption>
					<tr ng-repeat="vendor in vendors">
						<td>
							<table>
								<caption ng-bind="vendor.name"></caption>
								<tr>
									<th>Product</th>
									<th>Price</th>
									<th>Quickness</th>
								</tr>
								<tr ng-repeat="product in vendor.products">
									<td ng-bind="product.name"></td>
									<td ng-bind="product.price"></td>
									<td ng-bind="vendor.quickness"></td>
								</tr>
							</table>
						</td>
						<td>
							<span class="button remove" ng-click="removeVendor(vendor.name)">&#xf00d;</span>
						</td>
					</tr>
				</table>
			</section>
			<section ng-controller="orderController">
				<div>
					<div class="story-popup">
						<table>
							<tr>
								<th>Product</th>
								<th>Vendor</th>
								<th>Amount</th>
								<th>Price</th>
								<th>Date</th>
							</tr>
							<tr ng-repeat="orderItem in ordersStory">
								<td ng-bind="orderItem.name"></td>
								<td ng-bind="orderItem.vendor"></td>
								<td ng-bind="orderItem.amount"></td>
								<td ng-bind="orderItem.price"></td>
								<td ng-bind="orderItem.date | date: 'yyyy-MM-dd H:m:s' "></td>													
							</tr>
						</table>
					</div>
					<span class="button story" ng-click="showStory()">&#xf1da; story</span>
					<span class="button chart" ng-click="">&#xf080; chart</span>
				</div>
				<div class="available-vendors">
					<table>
						<caption ng-bind="order.product"></caption>
						<thead>
							<tr>
								<th>Vendor</th>
								<th>Price</th>
								<th>quickness</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="vendor in availableVendors">
								<td ng-bind="vendor.name"></td>
								<td ng-bind="vendor.price"></td>
								<td ng-bind="vendor.quickness"></td>
								<td>
									<span class="button add" ng-click="pickProduct(order.product, order.family, vendor.name, vendor.price)">&#xf055;</span>
								</td>
							</tr>
						</tbody>
					</table>
					<div class="checkout">
						<h2>Total:</h2>
						<span ng-bind="sum"></span>
					</div>
				</div>
				<div class="checkout">
					<div class="success-popup">
						<h1>Success!</h1>
					</div>
					<div class="error-popup">
						<h1>Error!</h1>
					</div>
					<h2>Total:</h2>
					<span ng-bind="sum"></span>
					<span class="button add" ng-show="sum" ng-click="confirmOrder(confirmSuccess, confirmError)">&#xf218;</span>
				</div>
				<table>
					<tr>
						<th>Product</th>
						<th>Vendor</th>
						<th>Amount</th>
						<th>Price</th>
					</tr>
					<tr ng-repeat="orderItem in orderList">
						<td ng-bind="orderItem.name"></td>
						<td ng-bind="orderItem.vendor"></td>
						<td ng-bind="orderItem.amount"></td>
						<td ng-bind="orderItem.price"></td>
						<td>
							<span class="button remove" ng-click="removeProduct(orderItem.name, orderItem.vendor)">&#xf00d;</span>
						</td>
					</tr>
				</table>
			</section>
		</div>
	</body>
	<script src="../assets/libs/jquery-1.11.3.min.js"></script>
	<script src="../assets/libs/utils.js"></script>
	<script src="../assets/libs/blocker.js"></script>
	<script src="../assets/libs/angular.min.js"></script>
	<script src="../assets/libs/bpopup.js"></script>
	<script src="../appModule.js"></script>
	<script src="../Models/stockModel.js"></script>
	<script src="../Models/vendorsModel.js"></script>
	<script src="../services/stockService.js"></script>
	<script src="../services/vendorsService.js"></script>
	<script src="../services/orderService.js"></script>
	<script src="../Controllers/order-controller.js"></script>
	<script src="../Controllers/vendors-controller.js"></script>
	<script src="../Controllers/stock-controller.js"></script>

</html>